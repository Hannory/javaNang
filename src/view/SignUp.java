package view;

import java.awt.Color;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.HashMap;
import java.util.Map;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

import model.dao.UserDao;
import model.vo.User;

public class SignUp extends JPanel{
	MainFrame mf;
	JPanel signUp;           //회원가입 패널
	JButton button;          //뒤로가기 버튼
	JButton join;            //가입하기 버튼
	JTextField idtf;         //아이디 입력받는 텍스트필드
	JPasswordField pwpf;     //패스워드 입력받는 패스워드필드
	JPasswordField cpwpf;    //체크패스워드 입력받는 패스워드필드
	JTextField nicktf;       //닉네임 입력받는 텍스트필드
	JTextField emailtf;      //이메일 입력받는 텍스트필드
	
	
	public SignUp() {}       //기본 생성자 
	
	public SignUp(MainFrame mf) {
		this.mf = mf;
		this.signUp = this;
		
		this.setSize(445, 770);
		
		//바 
		JPanel panel = new JPanel();
		panel.setBackground(new Color(39, 50, 56));
		panel.setLocation(0, 0);
		panel.setSize(445, 70);
		panel.setLayout(null);
		
		//바에 들어갈 제목
		JLabel label = new JLabel("회원가입");
		label.setLocation(90, 27);
		label.setSize(60, 30);
		label.setForeground(Color.WHITE);
		
		//바에 들어갈 뒤로가기 버튼
		button = new JButton("<");
		button.setLocation(11, 13);
		button.setSize(50, 50);
		
		//아이디 라벨
		JLabel idlb = new JLabel("ID");
		idlb.setLocation(43, 170);
		idlb.setSize(60, 30);
		
		//아이디 입력받는 텍스트필드
		idtf = new JTextField();
		idtf.setLocation(90, 170);
		idtf.setSize(205, 30);
		
		
		//아이디 중복체크 버튼
		JButton idbtn = new JButton("중복체크");
		idbtn.setLocation(300, 170);
		idbtn.setSize(100, 30);
		
		//패스워드 라벨
		JLabel pwlb = new JLabel("PW");
		pwlb.setLocation(37, 270);
		pwlb.setSize(60, 30);
		
		//패스워드 입력받는 패스워드필드
		pwpf = new JPasswordField();
		pwpf.setLocation(90, 270);
		pwpf.setSize(205, 30);
		
		
		//체크패스워드 라벨
		JLabel cpwlb = new JLabel("PW 확인");
		cpwlb.setLocation(25, 340);
		cpwlb.setSize(60, 30);
		
		//체크패스워드 입력받는 패스워드필드
		cpwpf = new JPasswordField();
		cpwpf.setLocation(90, 340);
		cpwpf.setSize(205, 30);
		
		
		
		//닉네임 라벨
		JLabel nicklb = new JLabel("닉네임");
		nicklb.setLocation(28, 440);
		nicklb.setSize(60, 30);
		
		//닉네임 입력받는 텍스트필드
		nicktf = new JTextField();
		nicktf.setLocation(90, 440);
		nicktf.setSize(205, 30);
		
		
		//닉네임 중복체크 버튼
		JButton nickbtn = new JButton("중복체크");
		nickbtn.setLocation(300, 440);
		nickbtn.setSize(100, 30);
		
		//이메일 라벨
		JLabel emaillb = new JLabel("E-MAIL");
		emaillb.setLocation(27, 540);
		emaillb.setSize(60, 30);
		
		//이메일 입력받는 텍스트필드
		emailtf = new JTextField();
		emailtf.setLocation(90, 540);
		emailtf.setSize(205, 30);
		
		
		//이메일 인증받는 버튼
		JButton emailbtn = new JButton("인증받기");
		emailbtn.setLocation(300, 540);
		emailbtn.setSize(100, 30);
		
		//가입하기 버튼
		join = new JButton("가입하기");
		join.setLocation(150, 650);
		join.setSize(120, 50);
		
		//가입하기 버튼 누르면 회원가입(텍스트필드에 있는 정보들을 user.dat 파일에 저장) -> 로그인 패널로 이동
		join.addMouseListener(new MouseAdapter() {
			
			@Override
			public void mouseClicked(MouseEvent e) {
				JOptionPane.showMessageDialog(null, "가입이 완료되었습니다.");
				ChangePanel.changePanel(mf, signUp, new LoginPage(mf));
			  
				UserDao ud = new UserDao();
				ud.writeUserList(signUp, inputUser());
		
				
				
				
			}
			
		});
		
		
		
		this.add(panel);
		panel.add(label);
		panel.add(button);
		
		this.add(idlb);
		this.add(idtf);
		this.add(idbtn);
		
		this.add(pwlb);
		this.add(pwpf);
		
		this.add(cpwlb);
		this.add(cpwpf);
		
		this.add(nicklb);
		this.add(nicktf);
		this.add(nickbtn);
		
		this.add(emaillb);
		this.add(emailtf);
		this.add(emailbtn);
		
		this.add(join);
		
		
		
		//뒤로가기 버튼
		button.addMouseListener(new MyMouseAdapter());
		
		
	}
	
	
	class MyMouseAdapter extends MouseAdapter{
		@Override
		public void mouseClicked(MouseEvent e) {//뒤로가기 버튼 누르면 약관동의 패널로 이동
			if(e.getSource() == button) {
				ChangePanel.changePanel(mf, signUp, new Agree(mf));
			}
		}
	}
	
	
	
	//텍스트필드, 패스워드필드로 입력받은 값들의 텍스트를 추출하여 setter로 User 클래스의 객체u를 생성..
	public User inputUser() {
		User u = new User();
		
		u.setUserId(idtf.getText());
		u.setUserPw(String.valueOf(pwpf.getPassword()));
		u.setNickname(nicktf.getText());
		u.setEmail(emailtf.getText());

		return u;
	}



}
		
		
		
	
	
	
	
	
	
	


